<!DOCTYPE html>

<html>
<head>
  <title>Syslogs</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="../css/bootstrap.css" rel="stylesheet">
  <link href="../font-awesome/css/font-awesome.css" rel="stylesheet">
  <link href="../css/plugins/jQueryUI/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
  <link href="../css/plugins/jqGrid/ui.jqgrid-bootstrap.css" rel="stylesheet">
  <link href="../css/plugins/toastr/toastr.min.css" rel="stylesheet">
  <link href="../css/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css" rel="stylesheet">
  <link href="../css/animate.css" rel="stylesheet">
  <link href="../css/style.css" rel="stylesheet">
  <link href="../css/style_ext.css" rel="stylesheet">
  <link href="../css/plugins/footable/footable.core.css" rel="stylesheet" type="text/css">
  <link href="../css/plugins/datapicker/datepicker3.css" rel="stylesheet">
  <link href="../css/plugins/select2/select2.min.css" rel="stylesheet">
  <style type="text/css">
    .popover{
      max-width: 490px;
    }
  </style>
</head>
<body class="fixed-sidebar no-skin-config full-height-layout  pace-done">

<div id="wrapper">

  <nav class="navbar-default navbar-static-side" role="navigation">
    <div class="sidebar-collapse">
      <ul class="nav metismenu" id="side-menu">
        <li class="nav-header">
          <div class="dropdown profile-element">
          <span>
              <image class="brand" src="../img/logo.png"/>
          </span>
          </div>
          <div class="logo-element">
            <image style="width:40px;height:40px;" src="../img/logo.png"/>
          </div>
        </li>
        <li class="">
          <a href="home"><i class="fa fa-home"></i> <span class="nav-label">主页</span></a>
        </li>
        <li class="">
          <a href="#"><i class="fa fa-qrcode"></i> <span class="nav-label">Radius</span><span class="fa arrow"></span></a>
          <ul class="nav nav-second-level collapse">
            <li class="">
              <a href="OnlineUsers/Index">在线用户</a>
            </li>
            <li class="">
              <a href="AuthAccounts/Index">用户管理</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="#"><i class="fa fa-floppy-o"></i> <span class="nav-label">日志管理</span><span class="fa arrow"></span></a>
          <ul class="nav nav-second-level collapse">
            <li>
              <a href="#">查看</a>
            </li>
            <li>
              <a href="#">主机列表</a>
            </li>
            <li>
              <a href="#">设置</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="#"><i class="fa fa-area-chart"></i> <span class="nav-label">报表</span></a>
        </li>
      </ul>

    </div>
  </nav>

  <div id="page-wrapper" class="gray-bg">
    <div class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
          <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            <form role="search" class="navbar-form-custom" action="search_results.html">
              <div class="form-group">
                <input type="text" placeholder="Search for something..." class="form-control" name="top-search"
                       id="top-search">
              </div>
            </form>
          </div>
          <ul class="nav navbar-top-links navbar-right">
            <li>
              <span class="m-r-sm text-muted welcome-message"></span>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                <i class="fa fa-envelope"></i> <span class="label label-warning">16</span>
              </a>
              <ul class="dropdown-menu dropdown-messages">
                <li>
                  <div class="dropdown-messages-box">
                    <a href="profile.html" class="pull-left">

                    </a>
                    <div class="media-body">
                      <small class="pull-right">46h ago</small>
                      <strong>Mike Loreipsum</strong> started following <strong>Monica Smith</strong>. <br>
                      <small class="text-muted">3 days ago at 7:58 pm - 10.06.2014</small>
                    </div>
                  </div>
                </li>
                <li class="divider"></li>
                <li>
                  <div class="dropdown-messages-box">
                    <a href="profile.html" class="pull-left">

                    </a>
                    <div class="media-body ">
                      <small class="pull-right text-navy">5h ago</small>
                      <strong>Chris Johnatan Overtunk</strong> started following <strong>Monica Smith</strong>. <br>
                      <small class="text-muted">Yesterday 1:21 pm - 11.06.2014</small>
                    </div>
                  </div>
                </li>
                <li class="divider"></li>
                <li>
                  <div class="dropdown-messages-box">
                    <a href="profile.html" class="pull-left">

                    </a>
                    <div class="media-body ">
                      <small class="pull-right">23h ago</small>
                      <strong>Monica Smith</strong> love <strong>Kim Smith</strong>. <br>
                      <small class="text-muted">2 days ago at 2:30 am - 11.06.2014</small>
                    </div>
                  </div>
                </li>
                <li class="divider"></li>
                <li>
                  <div class="text-center link-block">
                    <a href="mailbox.html">
                      <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
                    </a>
                  </div>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                <i class="fa fa-bell"></i> <span class="label label-primary">8</span>
              </a>
              <ul class="dropdown-menu dropdown-alerts">
                <li>
                  <a href="mailbox.html">
                    <div>
                      <i class="fa fa-envelope fa-fw"></i> You have 16 messages
                      <span class="pull-right text-muted small">4 minutes ago</span>
                    </div>
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a href="profile.html">
                    <div>
                      <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                      <span class="pull-right text-muted small">12 minutes ago</span>
                    </div>
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <a href="grid_options.html">
                    <div>
                      <i class="fa fa-upload fa-fw"></i> Server Rebooted
                      <span class="pull-right text-muted small">4 minutes ago</span>
                    </div>
                  </a>
                </li>
                <li class="divider"></li>
                <li>
                  <div class="text-center link-block">
                    <a href="notifications.html">
                      <strong>See All Alerts</strong>
                      <i class="fa fa-angle-right"></i>
                    </a>
                  </div>
                </li>
              </ul>
            </li>


            <li>
              <a href="login.html">
                <i class="fa fa-sign-out"></i> Log out
              </a>
            </li>
            <li>
              <a class="right-sidebar-toggle">
                <i class="fa fa-tasks"></i>
              </a>
            </li>
          </ul>

        </nav>
    </div>

    <div id="syslog_errors"></div>

    <script id="errors_templ" type="application/template">
      <div class="alert alert-danger alert-dismissable">
        <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
        <ul style="margin-top:10px;" id="error_messages">
          <li><%= errors.status %> : <%= errors.responseText %></li>
        </ul>
      </div>
    </script>

    <script type="text/template" id="filter_error_messages">
      <% if (messages) { %>
      <div class="alert alert-danger alert-dismissable">
        <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
        <ul style="margin-top:10px;">
          <% messages.forEach(function(message){ %>
          <li><%= message %></li>
          <% }) %>
        </ul>
      </div>
      <% } %>
    </script>
    <div class="fh-no-breadcrumb">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          Syslogs
          <div class="ibox-tools"></div>
        </div>
        <div class="ibox-content">
          <div class="table-responsive">
            <div class="html5buttons">
              <div class="btn-group ">
                <button data-toggle="dropdown" class="btn btn-default dropdown-toggle" aria-expanded="false">导出 <span class="caret"></span></button>
                <ul class="dropdown-menu">
                  <li><a id="syslog_out_csv">csv格式</a></li>
                  <li><a id="syslog_out_txt">txt格式</a></li>
                </ul>
              </div>
              &nbsp;&nbsp;&nbsp;&nbsp;
              <!-- 日期模板 -->
              <script type="application/template" id="dateTempl">
                <div class="ibox-content" style="width: 470px;">
                  <div class="box1 col-md-5">
                    <div class="form-group" id="data_5">
                      <div class="input-daterange input-group" id="datepicker">
                        <p>
                          <span>起始日期</span>
                          <input type="text" class="input-sm form-control" name="start" value="<%= date.starttime %>" id="select_date_start">
                        </p>
                        <p>
                          <span>截止日期</span>
                          <input type="text" class="input-sm form-control" name="end" value="<%= date.endtime %>" id="select_date_end">
                        </p>
                      </div>
                    </div>
                    <p>
                      <button type="button" class="btn btn-block btn-outline btn-primary" id="select_rangedate_confirm">确定</button>
                    </p>
                  </div>


                  <div class="box2 col-md-7">
                    <h3 class="font-bold">
                      常用选择
                    </h3>
                    <p id="condate_selectors">
                      <button type="button" class="btn btn-outline btn-default" date="one_day">最近一天</button>
                      <button type="button" class="btn btn-outline btn-default" date="three_days">最近三天</button>
                      <button type="button" class="btn btn-outline btn-default" date="one_week">最近一周</button>
                      <button type="button" class="btn btn-outline btn-default" date="one_month">近一个月</button>
                      <button type="button" class="btn btn-outline btn-default" date="three_months">近三个月</button>
                      <button type="button" class="btn btn-outline btn-default" date="one_year">最近一年</button>
                    </p>
                  </div>
                </div>
              </script>
              <button class="btn btn-default buttons-copy buttons-html5" id="date_select1">
                <span>选择日期</span>
              </button>
              &nbsp;&nbsp;&nbsp;&nbsp;
            </div>
            <div  class="dataTables_length" id="DataTables_Table_0_length">
              <label>每页显示
                <select id="syslog_pagesize_select">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                  <option value="1000">1000</option>
                </select>
              </label>
            </div>
            <div id="DataTables_Table_0_filter" class="dataTables_filter">
              <label>选择条件：
                <select id="syslog_filter_select" type="search">
                  <option value="0">默认</option>
                  <option value="fast" id="fast_new_filter">快速查询</option>
                </select>
                <script id="filters_body" type="text/template">
                  <% if (querys) { %>
                  <% querys.forEach(function(query){ %>
                  <option value="<%= query.id %>"><%= query.name %></option>
                  <% }) %>
                  <% } %>
                </script>
              </label>
            </div>

            <div class="dataTables_info" id="DataTables_Table_0_info" role="status" aria-live="polite">
              共有<span id="total_counts"></span>条记录
            </div>


            <div id="fast_filters_form" hidden="true" class="ibox-content">
              <form class="form-horizontal" id="filters_create_form" role="form">
                <div class="form-group">
                  <label class="col-lg-2 control-label ">过滤器名:</label>
                  <div class="col-lg-9">
                    <input type="text" id="filters_name" class="form-control"  value="" name="name">
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-2 control-label ">描述:</label>
                  <div class="col-lg-9">
                    <textarea id="filters_description" class="form-control" rows="3" value="" name="description"></textarea>
                  </div>
                </div>
                <!--点击保存的时候显示姓名描述编辑 编辑成功后保存为提交-->
                <div class="form-group">
                  <div class="col-lg-offset-2 col-lg-10">
                    <button type="submit" class="btn btn-info controls" id="filter_new_submit">创建</button>
                    <button class="btn btn-info controls" id="filters_once_concel">取消</button>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 control-label ">主机名:</label>
                  <div class="col-lg-9">
                    <select class="form-control" multiple="" tabindex="-1"  id="filter_address_selection">

                      <script type="text/template" id="filter_address_templ">
                        <% if (anames) { %>
                        <% anames.forEach(function(aname){ %>
                        <option value="<%= aname.Term %>"><%= aname.Term %></option>
                        <% }) %>
                        <% } %>
                      </script>

                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-2 control-label ">servity:</label>
                  <div class="input-group col-lg-9">
                    <div class="input-group-btn">
                      <button data-toggle="dropdown" class="btn btn-white dropdown-toggle" type="button" aria-expanded="false">
                        <span id="filter_severity_range_text">大于等于</span>
                        <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li><a class="filter_severity_range">大于等于</a></li>
                        <li><a class="filter_severity_range">小于等于</a></li>
                        <li><a class="filter_severity_range">等于</a></li>
                      </ul>
                    </div>
                    <select class="form-control" id="filter_severity_selection">
                      <option value="0">0 (Emergency)</option>
                      <option value="1">1 (Alert)</option>
                      <option value="2">2 (Critical)</option>
                      <option value="3">3 (Error)</option>
                      <option value="4">4 (Warning)</option>
                      <option value="5">5 (Notice)</option>
                      <option value="6">6 (Informational)</option>
                      <option value="7">7 (Debug)</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-2 control-label ">facility:</label>
                  <div class="col-lg-9">
                    <select  class="form-control" multiple="" tabindex="-1" aria-hidden="true" id="filter_facility_selection">
                      <option value="0">0  (内核消息)</option>
                      <option value="1">1  (用户级消息)</option>
                      <option value="2">2  (邮件系统)</option>
                      <option value="3">3  (系统守护进程)</option>
                      <option value="4">4  (安全认证)</option>
                      <option value="5">5  (syslog内部生成的消息)</option>
                      <option value="6">6  (打印系统)</option>
                      <option value="7">7  (网络消息)</option>
                      <option value="8">8  (UUIP)</option>
                      <option value="10">10 (时钟)</option>
                      <option value="10">10 (安全授权)</option>
                      <option value="11">11 (FTP)</option>
                      <option value="12">12 (NTP)</option>
                      <option value="13">13 (日志审计)</option>
                      <option value="14">14 (日志警报)</option>
                      <option value="15">15 (调度程序)</option>
                      <option value="16">16 (本地使用0)</option>
                      <option value="17">17 (本地使用1)</option>
                      <option value="18">18 (本地使用2)</option>
                      <option value="19">19 (本地使用3)</option>
                      <option value="20">20 (本地使用4)</option>
                      <option value="21">21 (本地使用5)</option>
                      <option value="22">22 (本地使用6)</option>
                      <option value="23">23 (本地使用7)</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-2 control-label ">包含内容:</label>
                  <div class="col-lg-9">
                    <input type="text" id="filter_message" class="form-control"  value="" name="message">
                  </div>
                </div>

                <div class="form-group">
                  <div class="col-lg-offset-2 col-lg-10">
                    <button type="button" class="btn btn-info controls" id="filter_once_create">保存</button>
                    <button type="button" class="btn btn-info controls" id="filter_once_query">查询</button>
                  </div>
                </div>

              </form>
            </div>


            <table class="table table-striped table-bordered table-hover dataTable dtr-inline">
              <thead id="syslog_table_head">
                <tr>
                  <th>接收时间</th>
                  <th>设备</th>
                  <th>等级</th>
                  <th>主机名</th>
                  <th>消息</th>
                </tr>
              </thead>
              <tbody id="datas_body">
                <!-- 系统日志信息，由下面的模板写入-->
              </tbody>
              <script id="syslogs_table" type="text/template">
                <% if (syslogs) { %>
                <% var i= 0; %>
                <% syslogs.forEach(function(syslog){ %>
                <tr>
                  <td><%= syslog.reception %></td>
                  <td  type="facilities"><%= syslog.facility %></td>
                  <td>
                    <span class="label label-primary" type="severities"><%= syslog.severity %></span>
                  </td>
                  <td><%= syslog.address%></td>
                  <td><%= syslog.message %></td>
                </tr>
                <% }) %>
                <% } %>
              </script>
            </table>
            <div id="pages_body" class="pagination"  style="float:right;">

            <script id="pageUnits" type="text/template">
              <ul class="pagination pagination-sm">
                <li>
                  <a onclick="ToPage(this);">首页</a>
                </li>
                <li>
                  <a onclick="ToPage(this);">上一页</a>
                </li>

                  <% if(maxpage<=5) {%>
                    <% for(var i=1;i<=maxpage;i++) { %>
                    <li>
                      <a class="page_select" onclick="ToPage(this);" value="<%= i %>"><%= i %></a>
                    </li>
                    <% } %>
                  <% }else if(maxpage>5) {%>
                    <% if(currentPage >= (maxpage-2)){ %>
                      <% currentPage = maxpage-2 %>
                    <% }else if( currentPage<3 ){ %>
                      <% currentPage = 3 %>
                    <% } %>
                    <% for(var i=(currentPage-2);i<=(currentPage+2);i++) { %>
                      <li>
                        <a class="page_select" onclick="ToPage(this);"><%= i %></a>
                      </li>
                    <% } %>
                <% } %>
                  <li>
                    <label>
                      <input onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" id="aim_page" style="width:36px;">
                    /<span id="maxPage"><%= maxpage %></span>页
                      <a onclick="ToPage(this);">跳转</a>
                    </label>
                  </li>
              <li>
                <a onclick="ToPage(this);">下一页</a>
              </li>
              <li>
                <a onclick="ToPage(this);">尾页</a>
              </li>
            </ul>
          </script>
          </div>
          <div id="temporary_syslogs" hidden></div>
            <input type="hidden" value="1" id="currentPage">
            <input type="hidden" value="" id="starttime">
            <input type="hidden" value="" id="endtime">
            <input type="hidden" value="2017/4/5" id="selector_starttime">
            <input type="hidden" value="2017/4/10" id="selector_endtime">
            <input type="hidden" value="popover" id="popoverid">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>



<script src="../js/jquery-2.1.1.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="../js/plugins/jqGrid/i18n/grid.locale-cn.js"></script>
<script src="../js/plugins/jqGrid/jquery.jqGrid.min.js"></script>
<script src="../js/plugins/pace/pace.min.js"></script>
<script src="../js/plugins/toastr/toastr.min.js"></script>
<script src="../js/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>
<script src="../js/plugins/validate/jquery.validate.min.js"></script>
<script src="../js/plugins/validate/jquery.validate.additional.js"></script>
<script src="../js/plugins/validate/i18n/messages_zh.js"></script>
<!-- Chosen -->
<script src="../js/plugins/chosen/chosen.jquery.js"></script>

<script src="../js/inspinia.js"></script>
<script src="../js/inspinia_ext.js"></script>
<script src="../js/app.js"></script>

<script src="../js/plugins/footable/footable.all.min.js" type="text/javascript" charset="utf-8"></script>
<!-- Data picker -->
<script src="../js/plugins/datapicker/bootstrap-datepicker.js"></script>
<!-- Date range use moment.js same as full calendar plugin -->
<script src="../js/plugins/fullcalendar/moment.min.js"></script>
<!-- Date range picker -->
<script src="../js/plugins/daterangepicker/daterangepicker.js"></script>
<!-- Select2 -->
<script src="../js/plugins/select2/select2.full.min.js"></script>
<script src="../js/plugins/dataTables/datatables.min.js"></script>

<script src="../js/ejs.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/ejs.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/syslogs.js" type="text/javascript" charset="utf-8"></script>


</html>
